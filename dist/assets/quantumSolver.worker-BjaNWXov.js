(function(){"use strict";let c=null,f=null,s=null,t=[],w=0;const u=r=>`${r.row}-${r.col}`,I=()=>{if(!f||!s||t.length===0)return!1;const{GRID:r,END:p,DIMENSIONS:h}=f,i=h,y=Math.min(t.length,8),a=[];for(let d=0;d<y&&t.length!==0;d++){const l=t.shift(),m=l[l.length-1];if(m.row===p.row&&m.col===p.col){const A=performance.now()-w,M={type:"solution-found",payload:{solution:l,elapsedTime:A}};return self.postMessage(M),!0}const{row:e,col:o}=m;if(e>0&&e<i-1&&o>0&&o<i-1){if(r[e-1][o]===0&&!s[e-1][o]){const n=u({row:e-1,col:o});s[e-1][o]=!0,a.push(n),t.push([...l,{row:e-1,col:o}])}if(r[e+1][o]===0&&!s[e+1][o]){const n=u({row:e+1,col:o});s[e+1][o]=!0,a.push(n),t.push([...l,{row:e+1,col:o}])}if(r[e][o-1]===0&&!s[e][o-1]){const n=u({row:e,col:o-1});s[e][o-1]=!0,a.push(n),t.push([...l,{row:e,col:o-1}])}if(r[e][o+1]===0&&!s[e][o+1]){const n=u({row:e,col:o+1});s[e][o+1]=!0,a.push(n),t.push([...l,{row:e,col:o+1}])}}else{if(e>0&&r[e-1][o]===0&&!s[e-1][o]){const n=u({row:e-1,col:o});s[e-1][o]=!0,a.push(n),t.push([...l,{row:e-1,col:o}])}if(e<i-1&&r[e+1][o]===0&&!s[e+1][o]){const n=u({row:e+1,col:o});s[e+1][o]=!0,a.push(n),t.push([...l,{row:e+1,col:o}])}if(o>0&&r[e][o-1]===0&&!s[e][o-1]){const n=u({row:e,col:o-1});s[e][o-1]=!0,a.push(n),t.push([...l,{row:e,col:o-1}])}if(o<i-1&&r[e][o+1]===0&&!s[e][o+1]){const n=u({row:e,col:o+1});s[e][o+1]=!0,a.push(n),t.push([...l,{row:e,col:o+1}])}}}if(a.length>0){const d={type:"wave-update",payload:{newWaveNodes:a}};self.postMessage(d)}return!1},g=()=>{!I()&&t.length>0&&(c=requestAnimationFrame(g))};self.onmessage=r=>{const p=r.data;switch(p.type){case"start":f=p.payload.mazeConfig;const{START:h,DIMENSIONS:i}=f;s=Array.from({length:i},()=>new Array(i).fill(!1)),s[h.row][h.col]=!0,t=[[h]],w=performance.now(),c=requestAnimationFrame(g);break;case"stop":c&&(cancelAnimationFrame(c),c=null),t=[];break;case"reset":c&&(cancelAnimationFrame(c),c=null),t=[],s=null,f=null;break;default:console.warn("Unknown message type received by worker:",p.type)}}})();
